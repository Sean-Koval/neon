================================================================================
PROMPT DETAIL â€” app/prompts/[id]/page.tsx
================================================================================
Prompt detail with content viewer/editor, performance metrics, version
history with diffs, and experiment linkage. This page treats prompts as
deployable artifacts with measurable performance â€” not just text files.
Route: /prompts/[id]

PARENT: Root layout with sidebar (IMPROVE group)
DATA: trpc.prompts.getById(id)
      trpc.prompts.getById(name, { history: true })   â†’ version list
      trpc.prompts.update(input)                       â†’ edit / promote
      trpc.prompts.delete(id)
      trpc.evals.getScoresByPrompt(name, version)      â†’ performance
      trpc.experiments.listByPrompt(name)               â†’ experiment links
LAYOUT: p-6, space-y-6

DESIGN NOTES:

1. Prompts are deployable artifacts with performance histories, not
   documents. The detail page connects prompt content to eval scores,
   latency, and cost â€” answering "is this prompt performing well?"
   alongside "what does this prompt say?"

2. Edit mode is inline, not modal. Clicking [Edit] transforms the
   read-only content block into an editable textarea/message-builder
   and reveals a commit message field. Saving always creates a new
   version (immutable version history). This mirrors git's model:
   you never edit a commit, you create a new one.

3. [Edit] and [New Version] are the same operation. Every content
   edit creates a new version via trpc.prompts.update, which auto-
   increments the version number and sets parent_version_id. The
   button is labeled [Edit] because that's the user's mental model,
   even though the backend creates a new version.

4. Human vs auto-optimizer distinction is prominent. Version history
   rows show (SparklesIcon) for created_by = "auto-opt" and
   (UserIcon) for human authors. Auto-optimized versions also get a
   subtle "auto" badge. This distinction matters because auto-
   generated content may need human review before production use.

5. Performance metrics come from eval runs that reference this prompt
   name + version. The join is via eval run metadata, not a direct
   FK. If no eval data exists, the performance section shows a
   placeholder directing the user to run an eval.

6. Chat-type prompts use a message list UI with role labels, not a
   single text block. Each message is visually distinct with its
   role (system/user/assistant) as a colored label.

7. Version history shows commit_message prominently â€” it's the "why"
   behind each change. The API's commit_message field is an authored
   description, distinct from auto-detected change summaries.

8. Back navigation is context-aware. If the referrer is /agents/[id],
   the label reads "â† Back to {agent name}" (using document.referrer
   to detect). Otherwise "â† Back to Prompts" with fallback to
   /prompts.

9. "Set as Production" is a toggle switch, not a button. It's a
   state change, not an action. The switch is ON for the production
   version and OFF otherwise. Toggling ON automatically demotes the
   previously-production version.

10. Side-by-side diff is available as a toggle alongside inline diff.
    For long prompts with scattered changes, side-by-side is faster
    to scan. For short prompts, inline is more compact. Default is
    inline.

11. Model configuration shown as metadata is the prompt's *suggested*
    config, not the agent's runtime config. A note clarifies:
    "Agent runtime may override these values." This prevents
    confusion when the agent uses different settings.

12. "Used in Experiments" section closes the feedback loop: operators
    can see which experiments tested this prompt version and what the
    results were, directly from the prompt detail page.

---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â† Back to Prompts                                                         â”‚
â”‚  text-sm text-content-muted hover:text-content-secondary                   â”‚
â”‚  cursor-pointer, flex items-center gap-1                                   â”‚
â”‚  (ChevronLeft w-4 h-4) + label text                                       â”‚
â”‚  Context-aware: see design note 8                                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Prompt Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  booking-system                         [text]  [âœ“ production]      â”‚  â”‚
â”‚  â”‚  text-2xl font-bold font-mono            type     status badge      â”‚  â”‚
â”‚  â”‚  text-content-primary                    badge                       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  System prompt for the booking agent                                 â”‚  â”‚
â”‚  â”‚  text-sm text-content-muted (prompt.description)                     â”‚  â”‚
â”‚  â”‚  Omitted if description is empty                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  v7 Â· (SparklesIcon) auto-opt Â· Updated 2h ago                      â”‚  â”‚
â”‚  â”‚  text-xs text-content-muted                                          â”‚  â”‚
â”‚  â”‚  Version number Â· author with icon Â· relative timestamp              â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Actions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  [Edit]              Primary action. Enters edit mode (see below).  â”‚  â”‚
â”‚  â”‚  btn btn-primary      Toggles content to editable.                   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  [Duplicate]          Creates a copy via Create dialog (pre-filled).â”‚  â”‚
â”‚  â”‚  btn btn-secondary    Opens Create Prompt dialog from index page.   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  [Delete]             Deletes all versions of this prompt.          â”‚  â”‚
â”‚  â”‚  btn btn-ghost         Opens delete confirmation dialog.             â”‚  â”‚
â”‚  â”‚  text-status-error    Disabled if is_production (opacity-50,        â”‚  â”‚
â”‚  â”‚                        tooltip "Remove from production first").     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Production toggle (right-aligned):                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚  â”‚
â”‚  â”‚  â”‚  Production  [â”â”â”â—]         â”‚  Switch component                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚  â”‚
â”‚  â”‚  text-sm text-content-secondary + Switch                             â”‚  â”‚
â”‚  â”‚  ON: bg-status-success for switch track                              â”‚  â”‚
â”‚  â”‚  Toggling ON: toast "Set as production (v7)"                        â”‚  â”‚
â”‚  â”‚  Toggling OFF: toast "Removed from production"                      â”‚  â”‚
â”‚  â”‚  Calls trpc.prompts.update({ is_production: bool })                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Performance (grid-cols-3 gap-4) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ Avg Score        â”‚ â”‚ Avg Latency      â”‚ â”‚ Cost / Call      â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ 0.94             â”‚ â”‚ 421ms            â”‚ â”‚ $0.12            â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ from 47 evals    â”‚ â”‚ p50              â”‚ â”‚ avg              â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  stat-card class                                                      â”‚  â”‚
â”‚  â”‚  Data from trpc.evals.getScoresByPrompt(name, version)              â”‚  â”‚
â”‚  â”‚  "from N evals" = count of eval runs using this prompt version      â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Score colored: >=0.85 text-status-success, >=0.7 text-status-     â”‚  â”‚
â”‚  â”‚    warning, <0.7 text-status-error                                  â”‚  â”‚
â”‚  â”‚  Latency colored: <=500ms text-status-success, <=2000ms            â”‚  â”‚
â”‚  â”‚    text-status-warning, >2000ms text-status-error                   â”‚  â”‚
â”‚  â”‚  Cost: text-content-primary (no color threshold)                    â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  No eval data state:                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  No evaluation data for this version                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Run an eval suite to see performance metrics.               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  [Run Eval â†’]                                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  text-sm text-content-muted, link â†’ /eval-runs (new run)    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  Single card spanning full width, text-center, py-6                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Prompt Content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ VIEW MODE (default) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Shown when type = "text"):                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  You are a booking assistant that helps users find and book     â”‚â”‚  â”‚
â”‚  â”‚  â”‚  travel accommodations. You should:                             â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  1. Ask clarifying questions about travel dates and preferences â”‚â”‚  â”‚
â”‚  â”‚  â”‚  2. Search available options using the {{tool_name}} tool       â”‚â”‚  â”‚
â”‚  â”‚  â”‚  3. Present options in a clear, formatted way                   â”‚â”‚  â”‚
â”‚  â”‚  â”‚  4. Help with booking confirmation and payment                  â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Rules:                                                         â”‚â”‚  â”‚
â”‚  â”‚  â”‚  - Always confirm before making a booking                       â”‚â”‚  â”‚
â”‚  â”‚  â”‚  - Show prices in {{currency}}                                  â”‚â”‚  â”‚
â”‚  â”‚  â”‚  - Greet the user as {{user_name}}                              â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚  font-mono, text-sm, bg-surface-card, border border-border,        â”‚  â”‚
â”‚  â”‚  rounded-md, p-4, whitespace-pre-wrap                              â”‚  â”‚
â”‚  â”‚  {{variables}} highlighted: text-amber-500 font-semibold           â”‚  â”‚
â”‚  â”‚  (regex: /\{\{(\w+)\}\}/g â†’ wrap in <span>)                       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Shown when type = "chat"):                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€ system â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ You are a booking assistant that helps users find and book â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ travel accommodations...                                   â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€ user â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ I'd like to book a hotel in {{destination}} for            â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ {{num_nights}} nights starting {{check_in_date}}.          â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€ assistant â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ I'd be happy to help you find a hotel! Let me search for  â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ available options...                                       â”‚â”‚â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚  Each message: card class, space-y-3                                â”‚  â”‚
â”‚  â”‚  Role label: text-xs font-semibold uppercase tracking-wider         â”‚  â”‚
â”‚  â”‚    system = text-purple-500                                         â”‚  â”‚
â”‚  â”‚    user = text-blue-500                                             â”‚  â”‚
â”‚  â”‚    assistant = text-emerald-500                                     â”‚  â”‚
â”‚  â”‚  Content: font-mono, text-sm, whitespace-pre-wrap                  â”‚  â”‚
â”‚  â”‚  {{variables}} highlighted same as text type                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Token & Variable Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  ~340 tokens (cl100k_base estimate)  Â·  3 variables detected       â”‚  â”‚
â”‚  â”‚  text-xs text-content-muted                                         â”‚  â”‚
â”‚  â”‚  Token count: client-side estimate using tiktoken cl100k_base       â”‚  â”‚
â”‚  â”‚  (OpenAI's tokenizer). Actual token count varies by model.         â”‚  â”‚
â”‚  â”‚  Note shown on hover: "Estimate only. Actual count depends on      â”‚  â”‚
â”‚  â”‚  the model's tokenizer."                                            â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Variables (3)                                                       â”‚  â”‚
â”‚  â”‚  text-sm font-semibold text-content-primary                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚ Name       â”‚ Type     â”‚ Required â”‚ Default                     â”‚â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚  â”‚  â”‚ user_name  â”‚ string   â”‚ âœ“        â”‚ â€”                           â”‚â”‚  â”‚
â”‚  â”‚  â”‚ currency   â”‚ string   â”‚ âœ“        â”‚ "USD"                       â”‚â”‚  â”‚
â”‚  â”‚  â”‚ tool_name  â”‚ string   â”‚          â”‚ "booking_search"            â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  table: text-sm, border-collapse                                    â”‚  â”‚
â”‚  â”‚  Name: font-mono, text-content-primary                              â”‚  â”‚
â”‚  â”‚  Type: text-content-muted (from PromptVariable.type schema)        â”‚  â”‚
â”‚  â”‚  Required: âœ“ (CheckIcon w-4 text-status-success) or blank          â”‚  â”‚
â”‚  â”‚  Default: font-mono text-content-muted, "â€”" if none                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Auto-detected from {{variable}} patterns in template.             â”‚  â”‚
â”‚  â”‚  Extended metadata (type, required, default) from variables         â”‚  â”‚
â”‚  â”‚  schema field. If variables schema is empty, auto-detect names     â”‚  â”‚
â”‚  â”‚  only and show type/required/default as "â€”".                       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Hidden if no variables detected.                                   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Metadata â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€ Prompt Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€ Model Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚                              â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Type      text               â”‚ â”‚  Model    gemini-2.5-flash  â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Agent     booking-agent      â”‚ â”‚  Temp     0.7               â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Tags      [qa] [prod]        â”‚ â”‚  Max Tok  2048              â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Created   2024-12-20         â”‚ â”‚                              â”‚â”‚  â”‚
â”‚  â”‚  â”‚  Updated   2h ago             â”‚ â”‚  text-xs text-content-muted:â”‚â”‚  â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚  "Suggested config. Agent   â”‚â”‚  â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚  runtime may override."     â”‚â”‚  â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚                              â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  grid grid-cols-2 gap-4                                              â”‚  â”‚
â”‚  â”‚  Each sub-card: card class, p-4, space-y-2                          â”‚  â”‚
â”‚  â”‚  Labels: text-xs text-content-muted uppercase tracking-wider        â”‚  â”‚
â”‚  â”‚  Values: text-sm text-content-primary                               â”‚  â”‚
â”‚  â”‚  "Agent" derived from tags matching known agent names               â”‚  â”‚
â”‚  â”‚  Tags: badge badge-secondary text-[10px] per tag, inline-flex      â”‚  â”‚
â”‚  â”‚  Tags editable inline: click tag to remove, type to add (same      â”‚  â”‚
â”‚  â”‚    combobox as Create dialog). Changes save immediately via         â”‚  â”‚
â”‚  â”‚    trpc.prompts.update (does NOT create new version â€” tags are     â”‚  â”‚
â”‚  â”‚    metadata, not content).                                          â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Model Config hidden if prompt.config is null/empty.               â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Version History â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Version History (12 versions)                                      â”‚  â”‚
â”‚  â”‚  text-lg font-semibold text-content-primary                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Ver â”‚ Author         â”‚ Date    â”‚ Status â”‚ Message    â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚  â”‚ v7  â”‚ âœ¦ auto-opt     â”‚ 2h ago  â”‚ âœ“ prod â”‚ Improved   â”‚ [â‹¯]  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ edge case  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ handling   â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ v6  â”‚ ğŸ‘¤ sean        â”‚ 1d ago  â”‚        â”‚ Added      â”‚ [â‹¯]  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ currency   â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ variable   â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ v5  â”‚ ğŸ‘¤ sean        â”‚ 3d ago  â”‚        â”‚ Refined    â”‚ [â‹¯]  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ rules      â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ v4  â”‚ âœ¦ auto-opt     â”‚ 1w ago  â”‚        â”‚ Auto-      â”‚ [â‹¯]  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ optimized  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     â”‚                â”‚         â”‚        â”‚ from loop  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Table: text-sm, full-width                                          â”‚  â”‚
â”‚  â”‚  Ver: font-mono, text-content-primary, font-semibold                â”‚  â”‚
â”‚  â”‚  Author: (SparklesIcon w-3 text-amber-500) for auto-opt            â”‚  â”‚
â”‚  â”‚          (UserIcon w-3 text-content-muted) for humans              â”‚  â”‚
â”‚  â”‚  Date: relative timestamp, text-content-muted                       â”‚  â”‚
â”‚  â”‚  Status: "âœ“ prod" badge-success text-[10px] when is_production     â”‚  â”‚
â”‚  â”‚  Message: commit_message field, text-content-secondary,             â”‚  â”‚
â”‚  â”‚    line-clamp-2. This is the authored "why" for the change.        â”‚  â”‚
â”‚  â”‚  [â‹¯]: overflow menu per row (see below)                            â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Row overflow menu [â‹¯]:                                             â”‚  â”‚
â”‚  â”‚    View Content     â†’ expands inline content preview below row      â”‚  â”‚
â”‚  â”‚    Compare to Current â†’ shows diff against current (latest) ver    â”‚  â”‚
â”‚  â”‚    Promote to Prod  â†’ sets this version as production              â”‚  â”‚
â”‚  â”‚                        (replaces current prod version)             â”‚  â”‚
â”‚  â”‚    Restore          â†’ enters edit mode pre-filled with this        â”‚  â”‚
â”‚  â”‚                        version's content. User can review and      â”‚  â”‚
â”‚  â”‚                        save as a new version. NOT a destructive    â”‚  â”‚
â”‚  â”‚                        rollback â€” creates version v(N+1) with     â”‚  â”‚
â”‚  â”‚                        the old content.                            â”‚  â”‚
â”‚  â”‚  Menu styling: same as index page overflow menu                    â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Click row â†’ toggles inline diff below (same row expansion)       â”‚  â”‚
â”‚  â”‚  Active row: bg-surface-overlay/30, border-l-2 border-primary     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Inline Diff (expanded, shown below clicked row) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Diff: v6 â†’ v7                              [Inline | Side-by-Side]â”‚  â”‚
â”‚  â”‚  text-xs text-content-muted                   toggle, default Inlineâ”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Inline mode):                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    4. Help with booking confirmation                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - 4. Help with booking confirmation                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + 4. Help with booking confirmation and payment            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + Rules:                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + - Always confirm before making a booking                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  font-mono, text-xs, bg-surface-card, rounded-md                  â”‚  â”‚
â”‚  â”‚  Added lines: bg-emerald-500/10, border-l-2 border-emerald-500   â”‚  â”‚
â”‚  â”‚  Removed lines: bg-rose-500/10, border-l-2 border-rose-500       â”‚  â”‚
â”‚  â”‚  Context lines: no background, text-content-muted                 â”‚  â”‚
â”‚  â”‚  Line numbers: text-content-muted text-[10px] w-8 text-right     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Side-by-side mode):                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚  â”‚ v6 (previous)           â”‚ v7 (current)            â”‚             â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚  â”‚
â”‚  â”‚  â”‚ 4. Help with booking    â”‚ 4. Help with booking    â”‚             â”‚  â”‚
â”‚  â”‚  â”‚    confirmation         â”‚    confirmation and     â”‚             â”‚  â”‚
â”‚  â”‚  â”‚                         â”‚    payment              â”‚             â”‚  â”‚
â”‚  â”‚  â”‚                         â”‚                         â”‚             â”‚  â”‚
â”‚  â”‚  â”‚                         â”‚ Rules:                  â”‚             â”‚  â”‚
â”‚  â”‚  â”‚                         â”‚ - Always confirm before â”‚             â”‚  â”‚
â”‚  â”‚  â”‚                         â”‚   making a booking      â”‚             â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â”‚  grid grid-cols-2 gap-0, each side: font-mono text-xs             â”‚  â”‚
â”‚  â”‚  Left column header: text-content-muted                            â”‚  â”‚
â”‚  â”‚  Right column header: text-content-muted                           â”‚  â”‚
â”‚  â”‚  Removed: bg-rose-500/10 in left column                           â”‚  â”‚
â”‚  â”‚  Added: bg-emerald-500/10 in right column                         â”‚  â”‚
â”‚  â”‚  Synchronized scroll between columns                               â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  "No changes" state: "Identical to previous version"              â”‚  â”‚
â”‚  â”‚  text-sm text-content-muted text-center py-4                      â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Used in Experiments â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Used in Experiments (2)                                            â”‚  â”‚
â”‚  â”‚  text-sm font-semibold text-content-primary                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ prompt-v7-test        A/B Test     Completed    +3.3% â†‘     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ v6 â†’ v7, 2 days ago                p=0.023                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ prompt-v5-upgrade     Rollout      Completed    +1.1% â†‘     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ v4 â†’ v5, 1 week ago               4/4 stages               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Each row: card class, p-3, cursor-pointer                         â”‚  â”‚
â”‚  â”‚  Click â†’ navigate to /experiments/[id]                              â”‚  â”‚
â”‚  â”‚  Hover: bg-surface-overlay/50                                       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Row 1: experiment name (font-mono text-sm), type badge, status    â”‚  â”‚
â”‚  â”‚    badge, delta (colored: positive = text-status-success,          â”‚  â”‚
â”‚  â”‚    negative = text-status-error)                                   â”‚  â”‚
â”‚  â”‚  Row 2: versions compared, relative time, significance / stages   â”‚  â”‚
â”‚  â”‚    text-xs text-content-muted                                      â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Data from trpc.experiments.listByPrompt(name)                     â”‚  â”‚
â”‚  â”‚  Filtered to experiments referencing this prompt name in variants   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Empty state:                                                       â”‚  â”‚
â”‚  â”‚  "No experiments have used this prompt."                           â”‚  â”‚
â”‚  â”‚  text-sm text-content-muted, py-4 text-center                     â”‚  â”‚
â”‚  â”‚  [Create Experiment â†’] link to /experiments (new)                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Hidden entirely if experiments feature is not yet available       â”‚  â”‚
â”‚  â”‚  (feature flag check).                                              â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EDIT MODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Entered by clicking [Edit] in the header. Also used by "Restore" from
version history (pre-fills content from the selected version).

The page transforms in-place â€” no modal, no navigation. Only the content
section and header actions change. Performance, Metadata, Version History,
and Experiments sections remain visible (read-only) below the editor.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Header (edit mode) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  booking-system                         [text]  [âœ“ production]      â”‚  â”‚
â”‚  â”‚  text-2xl font-bold font-mono                                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Editing Â· Changes will create version v8                           â”‚  â”‚
â”‚  â”‚  text-sm text-amber-500 (replaces description line)                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  [Save as v8]                        [Cancel]                       â”‚  â”‚
â”‚  â”‚  btn btn-primary                      btn btn-ghost                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  "Save as v8" disabled until content differs from current version   â”‚  â”‚
â”‚  â”‚  "Cancel" exits edit mode, restores original content, no confirm    â”‚  â”‚
â”‚  â”‚  (content loss is recoverable â€” user can re-enter edit mode)       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Production toggle, Duplicate, Delete: hidden during edit mode     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€ Content Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Text type):                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚ You are a booking assistant that helps users find and book      â”‚â”‚  â”‚
â”‚  â”‚  â”‚ travel accommodations. You should:                              â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚ 1. Ask clarifying questions about travel dates and preferences  â”‚â”‚  â”‚
â”‚  â”‚  â”‚ 2. Search available options using the {{tool_name}} tool        â”‚â”‚  â”‚
â”‚  â”‚  â”‚ 3. Present options in a clear, formatted way                    â”‚â”‚  â”‚
â”‚  â”‚  â”‚ 4. Help with booking confirmation and payment                   â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â”‚ Rules:                                                          â”‚â”‚  â”‚
â”‚  â”‚  â”‚ - Always confirm before making a booking                        â”‚â”‚  â”‚
â”‚  â”‚  â”‚ - Show prices in {{currency}}                                   â”‚â”‚  â”‚
â”‚  â”‚  â”‚ - Greet the user as {{user_name}}â–ˆ                              â”‚â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚  textarea, font-mono, text-sm, min-h-[300px], resize-y             â”‚  â”‚
â”‚  â”‚  border-2 border-primary (visual indicator of edit mode)            â”‚  â”‚
â”‚  â”‚  focus:ring-2 ring-primary/20                                       â”‚  â”‚
â”‚  â”‚  p-4, rounded-md, bg-surface-card                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  (Chat type):                                                       â”‚  â”‚
â”‚  â”‚  Same message builder as Create dialog (role dropdown + textarea    â”‚  â”‚
â”‚  â”‚  per message, [+ Add Message], drag reorder, [Trash2] remove).     â”‚  â”‚
â”‚  â”‚  Pre-filled with current messages. border-2 border-primary on     â”‚  â”‚
â”‚  â”‚  the containing card to indicate edit mode.                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Variables (live-updating) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚  Variables detected: user_name, currency, tool_name               â”‚  â”‚
â”‚  â”‚  text-xs text-content-muted, each as badge badge-secondary         â”‚  â”‚
â”‚  â”‚  Updates in real-time as content is edited.                         â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Commit Message â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  What changed? *                                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚  â”‚ e.g. Added currency variable for international support          â”‚â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â”‚  input: h-9, text-sm, border border-border, rounded-md             â”‚  â”‚
â”‚  â”‚  Required. Maps to commit_message field in API.                    â”‚  â”‚
â”‚  â”‚  "Save as v8" disabled until commit message is non-empty.          â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€ Model Config (optional, collapsible) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â–¸ Update Model Configuration                                      â”‚  â”‚
â”‚  â”‚  Same fields as Create dialog (Model, Temperature, Max Tokens).    â”‚  â”‚
â”‚  â”‚  Pre-filled with current config. Changes included in new version.  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  On save:                                                                   â”‚
â”‚    1. Calls trpc.prompts.update({                                          â”‚
â”‚         id: prompt.id,                                                     â”‚
â”‚         template: newContent,       // or messages for chat type          â”‚
â”‚         commit_message: commitMsg,                                         â”‚
â”‚         config: updatedConfig       // if changed                         â”‚
â”‚       })                                                                   â”‚
â”‚    2. API auto-increments version, sets parent_version_id                  â”‚
â”‚    3. Toast: "Version v8 created"                                          â”‚
â”‚    4. Exit edit mode, refresh data, new version visible in history        â”‚
â”‚                                                                             â”‚
â”‚  On cancel:                                                                 â”‚
â”‚    1. Restore content to current version (discard edits)                  â”‚
â”‚    2. Exit edit mode                                                       â”‚
â”‚    3. No confirmation dialog (edits are always recoverable)              â”‚
â”‚                                                                             â”‚
â”‚  On save error:                                                             â”‚
â”‚    1. Stay in edit mode (don't lose user's work)                          â”‚
â”‚    2. Show inline error: text-status-error text-sm below Save button     â”‚
â”‚    3. "Failed to save. Please try again."                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DELETE CONFIRMATION DIALOG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Same dialog as index page (see prompts/index.txt).
Triggered by [Delete] in header actions.
Navigates to /prompts on successful delete.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LOADING STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€ Header skeleton â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                         â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                    â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€ Performance skeleton (grid-cols-3 gap-4) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚    â”‚
  â”‚ â”‚ â–‘â–‘â–‘â–‘             â”‚ â”‚ â–‘â–‘â–‘â–‘             â”‚ â”‚ â–‘â–‘â–‘â–‘             â”‚    â”‚
  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€ Content skeleton â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                          â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                  â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                    â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                      â”‚
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€ Metadata skeleton (grid-cols-2 gap-4) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
  â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â”‚                â”‚
  â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘       â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘         â”‚                â”‚
  â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘        â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘         â”‚                â”‚
  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€ Version history skeleton â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                                 â”‚
  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
  â”‚ â”‚ â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘           â”‚â”‚
  â”‚ â”‚ â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘               â”‚â”‚
  â”‚ â”‚ â–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘     â–‘â–‘â–‘â–‘â–‘â–‘           â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                 â”‚â”‚
  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  animate-pulse on all â–‘ blocks.
  Back nav renders immediately (not skeletonized).


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ERROR STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                          â”‚
  â”‚        (AlertCircle icon, w-12 h-12, text-status-error) â”‚
  â”‚                                                          â”‚
  â”‚        Failed to load prompt                             â”‚
  â”‚        text-lg font-medium text-content-primary          â”‚
  â”‚                                                          â”‚
  â”‚        This prompt may have been deleted or you may      â”‚
  â”‚        not have access.                                  â”‚
  â”‚        text-sm text-content-muted                        â”‚
  â”‚                                                          â”‚
  â”‚        [Back to Prompts]                                 â”‚
  â”‚        btn btn-secondary btn-sm                          â”‚
  â”‚        Link to /prompts                                  â”‚
  â”‚                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Centered: min-h-[400px] flex items-center justify-center.
  Back nav still visible above error state.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NOT FOUND STATE (prompt ID doesn't exist)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                          â”‚
  â”‚        (FileQuestion icon, w-12 h-12, text-content-muted)â”‚
  â”‚                                                          â”‚
  â”‚        Prompt not found                                  â”‚
  â”‚        text-lg font-medium text-content-primary          â”‚
  â”‚                                                          â”‚
  â”‚        The prompt you're looking for doesn't exist       â”‚
  â”‚        or has been deleted.                              â”‚
  â”‚        text-sm text-content-muted                        â”‚
  â”‚                                                          â”‚
  â”‚        [Back to Prompts]                                 â”‚
  â”‚        btn btn-secondary btn-sm                          â”‚
  â”‚                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BEHAVIORAL NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Edit mode is inline, not a separate route or modal. The URL
   does not change when entering edit mode (no ?edit=true query
   param). This means refreshing the page exits edit mode and
   shows the current version â€” acceptable because edits are
   explicitly saved.

2. Every save creates a new version. The API's prompts.update
   auto-increments the version field and sets parent_version_id.
   There is no way to edit a version in place â€” version history
   is immutable (git-like model).

3. Commit message is required for save. The "Save as v8" button
   stays disabled until both: (a) content differs from current
   version AND (b) commit message is non-empty. This ensures
   every version has an authored description of what changed.

4. "Restore" from version history does NOT directly restore. It
   enters edit mode with the old version's content pre-filled.
   The user reviews, optionally modifies, adds a commit message
   (e.g., "Restored from v4"), and saves as a new version. This
   avoids accidental destructive rollbacks.

5. Diff is computed client-side using a standard diff algorithm
   (e.g., diff-match-patch or jsdiff). The diff compares the
   selected version against its parent (parent_version_id).
   "Compare to Current" compares against the latest version.

6. Performance section refreshes independently of prompt data.
   trpc.evals.getScoresByPrompt may be slower (ClickHouse query),
   so it loads after the prompt content appears.

7. Context-aware back navigation: on mount, check
   document.referrer. If it includes "/agents/", extract agent
   name from the prompt's tags or the URL, and show
   "â† Back to {agent name}". Use router.back() on click with
   fallback to /prompts if no referrer.

8. Tags are editable inline without creating a new version.
   Clicking a tag shows an Ã— to remove it. The tag input at the
   end of the tag list allows adding new tags. Changes call
   trpc.prompts.update({ tags }) which updates metadata without
   incrementing the version number. (The API supports metadata-
   only updates that don't create a new version.)

9. Chat message editor in edit mode supports drag-to-reorder via
   a grip handle (GripVertical icon). Uses @dnd-kit/sortable for
   accessible drag and drop. Messages can be added (+ Add Message)
   and removed (Trash2 icon, hidden when only one message remains).

10. Side-by-side diff toggle persists in localStorage as user
    preference ("prompt-diff-mode": "inline" | "side-by-side").
    Default is inline. Toggle is only shown when a diff is visible.

11. "Used in Experiments" section queries experiments that reference
    this prompt name in their variant configuration. The query
    returns experiments where variants.promptName = this prompt's
    name. Results show most recent first, max 10.

12. Production toggle confirmation: toggling production ON shows
    a toast with the version number ("Set v7 as production").
    Toggling OFF shows "Removed from production." No modal
    confirmation because the action is easily reversible (toggle
    it back).

13. Variable highlighting in the content viewer uses regex
    /\{\{(\w+)\}\}/g to find {{variable}} patterns and wraps
    each match in a <span class="text-amber-500 font-semibold">.
    In edit mode (textarea), variables are not highlighted (plain
    text editing). The detected variables list below updates in
    real-time.

14. "Test This Prompt" (future): When prompt playground is built
    (Phase 5), this button will open a side panel or navigate to
    /prompts/[id]/test where the user can fill in variable values
    and run the prompt against the configured model. For now, the
    button is removed from the UI entirely (not shown as disabled)
    to avoid confusion.
