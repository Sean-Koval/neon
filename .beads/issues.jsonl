{"id": "neon-1", "title": "Phase 1: Production-Ready Foundation", "description": "Close critical gaps, become viable Langfuse alternative.\n\nGoals:\n- Fix TestRunner mock → real implementation\n- Complete Compare backend for regression detection\n- Add prompt versioning & management\n- Cost & token analytics dashboard\n- Slack alerting webhook\n\nStatus: COMPLETED - Pushed in commit 0242aa6\n\nKey Changes Delivered:\n- Fixed TestRunner to execute real scorers with proper EvalContext\n- Added Compare API route (POST /api/compare)\n- Added cost & token analytics dashboard widgets\n- Added prompt versioning system (SDK types, manager, API routes)\n- Added Slack alerting for eval runs via webhook notifications", "status": "closed", "priority": 1, "issue_type": "epic", "created_at": "2026-02-01T13:08:46.696846108-05:00", "updated_at": "2026-02-01T13:08:49.356477926-05:00", "closed_at": "2026-02-01T13:08:49.356480505-05:00"}
{"id": "neon-10", "title": "Reward signal API", "description": "Build the core API for generating reward signals from evaluation data.\n\nInterface:\ninterface OptimizationSignal {\n  trace_id: string;\n  component: 'prompt' | 'retrieval' | 'tool_selection' | 'reasoning' | 'full_agent';\n  signal_type: 'reward' | 'preference' | 'gradient' | 'attribution';\n  value: number | PreferencePair | GradientInfo;\n  metadata: Record<string, any>;\n}\n\nFiles to Create:\n- packages/sdk/src/optimization/signals.ts\n- packages/sdk/src/optimization/types.ts\n- packages/sdk/src/optimization/index.ts\n\nAcceptance Criteria:\n- Can generate reward signals from traces\n- Supports multiple signal types\n- Can aggregate signals from multiple sources", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:09:59.727350875-05:00", "updated_at": "2026-02-02T15:45:32.949402236-05:00", "closed_at": "2026-02-02T15:45:32.949402236-05:00", "close_reason": "Merged PR #63 - optimization signal generation module", "labels": ["optimization", "phase-3", "sdk"], "dependencies": [{"issue_id": "neon-10", "depends_on_id": "neon-3", "type": "parent-child", "created_at": "2026-02-01T13:38:48.860186247-05:00", "created_by": "daemon", "metadata": "{}"}, {"issue_id": "neon-10", "depends_on_id": "neon-6", "type": "blocks", "created_at": "2026-02-01T13:40:53.577337838-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-11", "title": "Preference collection UI", "description": "Build a UI for collecting human preferences (A vs B comparisons) for RLHF data.\n\nFeatures:\n- Side-by-side response comparison\n- Thumbs up/down voting\n- Correction interface\n- Batch review mode\n\nFiles to Create:\n- frontend/app/feedback/\n- frontend/components/feedback/preference-picker.tsx\n- frontend/components/feedback/correction-form.tsx\n\nAcceptance Criteria:\n- Users can compare two responses and select preferred\n- Can provide corrections/edits\n- Preferences stored for training export", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:06.18139866-05:00", "updated_at": "2026-02-02T16:19:34.298863815-05:00", "closed_at": "2026-02-02T16:19:34.298863815-05:00", "close_reason": "Closed", "labels": ["frontend", "optimization", "phase-3"], "dependencies": [{"issue_id": "neon-11", "depends_on_id": "neon-3", "type": "parent-child", "created_at": "2026-02-01T13:38:50.30702907-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-12", "title": "Export to Agent Lightning format", "description": "Build export functionality for Agent Lightning training format.\n\nFeatures:\n- Export (state, action, reward) tuples\n- Compatible with Agent Lightning training pipeline\n- Filter by component/score threshold\n\nFiles to Create:\n- packages/sdk/src/export/agent-lightning.ts\n\nUsage:\nneon.export({\n  format: 'agent-lightning',\n  filter: { component: 'prompt', score_below: 0.7 },\n  output: './training_data/',\n});\n\nAcceptance Criteria:\n- Can export traces in Agent Lightning format\n- Configurable filters\n- Batch export support", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:12.061387008-05:00", "updated_at": "2026-02-02T18:15:54.667135104-05:00", "closed_at": "2026-02-02T18:15:54.667135104-05:00", "close_reason": "PR #65 merged", "labels": ["integration", "optimization", "phase-3", "sdk"]}
{"id": "neon-13", "title": "Export to DSPy format", "description": "Build export functionality for DSPy optimizer format.\n\nFeatures:\n- Export traces as DSPy examples\n- Compatible with DSPy prompt optimization\n- Filter by score/component\n\nFiles to Create:\n- packages/sdk/src/export/dspy.ts\n\nAcceptance Criteria:\n- Can export traces in DSPy format\n- Works with DSPy optimizers\n- Configurable example selection", "status": "open", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:16.396043144-05:00", "updated_at": "2026-02-01T13:10:16.396043144-05:00", "labels": ["integration", "optimization", "phase-3", "sdk"]}
{"id": "neon-14", "title": "Generic training data export", "description": "Build a generic/extensible training data export system.\n\nSupported formats:\n- OpenAI fine-tuning API (JSONL)\n- HuggingFace TRL format\n- Custom/extensible format\n\nFiles to Create:\n- packages/sdk/src/export/generic.ts\n- packages/sdk/src/export/openai-ft.ts\n- packages/sdk/src/export/trl.ts\n\nAcceptance Criteria:\n- Pluggable export format system\n- Support major training frameworks\n- Custom format registration", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-01T13:10:23.075624679-05:00", "updated_at": "2026-02-01T13:10:23.075624679-05:00", "labels": ["optimization", "phase-3", "sdk"]}
{"id": "neon-15", "title": "Python SDK core (tracing & scorers)", "description": "Build the core Python SDK with feature parity to TypeScript SDK.\n\nFeatures:\n- Tracing API (decorators, context managers)\n- All scorers ported from TS\n- ClickHouse integration\n- Temporal workflow client\n\nStructure:\nneon_sdk/\n  __init__.py\n  tracing/\n  scorers/\n  client.py\n  types.py\n\nAcceptance Criteria:\n- Tracing works identically to TS SDK\n- All scorers available\n- Native Python patterns (decorators, async/await)\n- Full type hints", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:29.732041828-05:00", "updated_at": "2026-02-02T18:44:47.273890233-05:00", "closed_at": "2026-02-02T18:44:47.273890233-05:00", "close_reason": "PR #66 created - Python SDK with full feature parity (tracing, scorers, ClickHouse, Temporal)", "labels": ["phase-4", "python", "sdk"], "dependencies": [{"issue_id": "neon-15", "depends_on_id": "neon-4", "type": "parent-child", "created_at": "2026-02-01T13:40:19.353169169-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-16", "title": "Python optimization integrations", "description": "Build Python-native integrations with ML frameworks.\n\nIntegrations:\n- Agent Lightning (native Python)\n- DSPy (native Python)\n- OpenAI fine-tuning API\n- HuggingFace TRL\n\nFeatures:\n- Direct reward signal API\n- Native export functions\n- Framework callbacks/hooks\n\nAcceptance Criteria:\n- Can export to all major frameworks\n- Native Python integration patterns\n- Works with async training loops", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:36.776865651-05:00", "updated_at": "2026-02-02T21:26:34.247212611-05:00", "closed_at": "2026-02-02T21:26:34.247212611-05:00", "close_reason": "PR #68 created: https://github.com/Sean-Koval/neon/pull/68", "labels": ["integration", "phase-4", "python", "sdk"], "dependencies": [{"issue_id": "neon-16", "depends_on_id": "neon-4", "type": "parent-child", "created_at": "2026-02-01T13:40:19.369731578-05:00", "created_by": "daemon", "metadata": "{}"}, {"issue_id": "neon-16", "depends_on_id": "neon-15", "type": "blocks", "created_at": "2026-02-01T13:40:54.134607787-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-17", "title": "PyPI package & documentation", "description": "Publish Python SDK to PyPI with full documentation.\n\nDeliverables:\n- PyPI package: neon-sdk\n- ReadTheDocs documentation\n- Example notebooks\n- Migration guide from TS SDK\n\nAcceptance Criteria:\n- pip install neon-sdk works\n- API reference docs\n- Getting started guide\n- Integration examples", "status": "in_progress", "priority": 2, "issue_type": "task", "created_at": "2026-02-01T13:10:40.28911163-05:00", "updated_at": "2026-02-02T23:29:59.959157253-05:00", "labels": ["docs", "phase-4", "python"], "dependencies": [{"issue_id": "neon-17", "depends_on_id": "neon-4", "type": "parent-child", "created_at": "2026-02-01T13:40:19.389253753-05:00", "created_by": "daemon", "metadata": "{}"}, {"issue_id": "neon-17", "depends_on_id": "neon-15", "type": "blocks", "created_at": "2026-02-01T13:40:54.148802259-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-18", "title": "Workspace/org model", "description": "Build multi-tenant workspace and organization model.\n\nFeatures:\n- Organizations with multiple workspaces\n- Team management\n- Role-based permissions (admin, member, viewer)\n- Cross-workspace analytics\n\nDatabase Changes:\n- organizations table\n- workspaces table\n- workspace_members table\n- org_members table\n\nAcceptance Criteria:\n- Users can belong to multiple orgs\n- Orgs can have multiple workspaces\n- Proper permission enforcement\n- Data isolation between workspaces", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:48.517544367-05:00", "updated_at": "2026-02-02T21:59:40.106890226-05:00", "closed_at": "2026-02-02T21:59:40.106890226-05:00", "close_reason": "PR #70 created: https://github.com/Sean-Koval/neon/pull/70", "labels": ["enterprise", "phase-5"], "dependencies": [{"issue_id": "neon-18", "depends_on_id": "neon-5", "type": "parent-child", "created_at": "2026-02-01T13:40:27.309912632-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-19", "title": "SSO/SAML authentication", "description": "Implement enterprise SSO/SAML authentication.\n\nProviders:\n- Okta\n- Azure AD\n- Google Workspace\n- Generic SAML 2.0\n\nFeatures:\n- SAML SSO configuration per org\n- Just-in-time user provisioning\n- SCIM for user sync (optional)\n\nAcceptance Criteria:\n- Orgs can configure SAML IdP\n- SSO login flow works\n- User attributes mapped correctly", "status": "open", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:10:55.831542891-05:00", "updated_at": "2026-02-01T13:10:55.831542891-05:00", "labels": ["enterprise", "phase-5", "security"], "dependencies": [{"issue_id": "neon-19", "depends_on_id": "neon-5", "type": "parent-child", "created_at": "2026-02-01T13:40:27.774189795-05:00", "created_by": "daemon", "metadata": "{}"}, {"issue_id": "neon-19", "depends_on_id": "neon-18", "type": "blocks", "created_at": "2026-02-01T13:40:54.167531495-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-2", "title": "Phase 2: Compound System Observability", "description": "See and debug complex AI systems. Build observability for compound AI systems with multiple interacting components.\n\nGoals:\n- Component attribution in traces (which component caused failure?)\n- Trace diffing UI (side-by-side comparison)\n- Causal failure analysis (understand upstream → downstream failures)\n- Multi-component correlation view\n\nArchitecture Focus:\n- Component-Level Attribution: Attribute scores to specific components (prompt, retrieval, tool selection, reasoning)\n- Causal Tracing: Understand which upstream component caused downstream failure\n- Multi-Agent Orchestration: Debug hierarchical agent systems\n\nFiles to Modify:\n- Extend span schema, packages/sdk/src/trace/\n- frontend/app/traces/diff/\n- packages/sdk/src/scorers/causal.ts\n- frontend/app/analysis/", "status": "closed", "priority": 1, "issue_type": "epic", "created_at": "2026-02-01T13:08:59.311147522-05:00", "updated_at": "2026-02-01T22:11:46.173480965-05:00", "closed_at": "2026-02-01T22:11:46.173480965-05:00", "close_reason": "All children complete: neon-6, neon-7, neon-8, neon-9"}
{"id": "neon-20", "title": "Usage-based billing hooks", "description": "Implement usage metering and billing integration hooks.\n\nFeatures:\n- Token usage tracking per workspace\n- API call metering\n- Storage usage tracking\n- Billing webhook events\n\nIntegrations:\n- Stripe usage records\n- Generic webhook for custom billing\n\nAcceptance Criteria:\n- Accurate usage tracking\n- Billing events emitted\n- Usage limits enforceable", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-01T13:11:02.13876323-05:00", "updated_at": "2026-02-01T13:11:02.13876323-05:00", "labels": ["billing", "enterprise", "phase-5"], "dependencies": [{"issue_id": "neon-20", "depends_on_id": "neon-5", "type": "parent-child", "created_at": "2026-02-01T13:40:27.791811239-05:00", "created_by": "daemon", "metadata": "{}"}, {"issue_id": "neon-20", "depends_on_id": "neon-18", "type": "blocks", "created_at": "2026-02-01T13:40:54.185145362-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-201", "title": "3.1 A/B Testing Framework", "description": "defineVariant API in SDK, statistical significance testing (t-test, bootstrap CI), comparison dashboard with confidence intervals. Files: packages/sdk/src/comparison/ (new), frontend/components/comparison/", "status": "open", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T00:56:54.565904291-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-03T00:56:54.565904291-05:00", "dependencies": [{"issue_id": "neon-201", "depends_on_id": "neon-3ae", "type": "blocks", "created_at": "2026-02-03T00:58:11.423701844-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-21", "title": "Audit logs for compliance", "description": "Implement comprehensive audit logging for SOC2/GDPR compliance.\n\nEvents to Log:\n- Authentication events\n- Data access events\n- Configuration changes\n- API key management\n- User management\n\nFeatures:\n- Immutable audit log storage\n- Retention policies\n- Export for compliance audits\n\nAcceptance Criteria:\n- All security-relevant events logged\n- Logs are immutable\n- Export to SIEM systems\n- Retention policy configurable", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-01T13:11:07.282706007-05:00", "updated_at": "2026-02-01T13:11:07.282706007-05:00", "labels": ["compliance", "enterprise", "phase-5", "security"], "dependencies": [{"issue_id": "neon-21", "depends_on_id": "neon-5", "type": "parent-child", "created_at": "2026-02-01T13:40:27.807448183-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-2jk", "title": "1.2 Skill selection scorer", "description": "Create a new scorer that evaluates whether the correct tool/skill was selected for a given task. Support expected tool chains (e.g., 'should call search before summarize'). Provide partial credit for correct category but wrong specific tool. Files: packages/sdk/src/scorers/skill-selection.ts (new), packages/neon-sdk-python/neon_sdk/scorers/ (new)", "status": "closed", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:52:41.45414119-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T21:59:33.488902567-05:00", "closed_at": "2026-02-02T21:59:33.488904705-05:00", "comments": [{"id": 4, "issue_id": "neon-2jk", "author": "Sean Koval", "text": "Implemented skill selection scorer with 6 scorer variants and 23 tests. Commit 7f76901", "created_at": "2026-02-03T02:59:33Z"}, {"id": 5, "issue_id": "neon-2jk", "author": "Sean Koval", "text": "PR created: https://github.com/Sean-Koval/neon/pull/71", "created_at": "2026-02-03T03:03:15Z"}]}
{"id": "neon-3", "title": "Phase 3: Optimization Layer", "description": "Connect observability to training. Build the universal optimization interface that connects Neon to training frameworks.\n\nGoals:\n- Reward signal API for training integration\n- Preference collection UI (A vs B comparisons)\n- Export to Agent Lightning format\n- Export to DSPy format\n- Generic training data export\n\nKey Abstraction:\ninterface OptimizationSignal {\n  trace_id: string;\n  component: 'prompt' | 'retrieval' | 'tool_selection' | 'reasoning' | 'full_agent';\n  signal_type: 'reward' | 'preference' | 'gradient' | 'attribution';\n  value: number | PreferencePair | GradientInfo;\n}\n\nTraining Framework Integrations:\n- Agent Lightning\n- DSPy\n- OpenAI Fine-Tuning API\n- HuggingFace TRL\n\nFiles to Create:\n- packages/sdk/src/optimization/signals.ts\n- frontend/app/feedback/\n- packages/sdk/src/export/agent-lightning.ts\n- packages/sdk/src/export/dspy.ts\n- packages/sdk/src/export/generic.ts", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-01T13:09:07.53582932-05:00", "updated_at": "2026-02-01T13:09:07.53582932-05:00"}
{"id": "neon-3ae", "title": "Phase 2: Core Debugging - MCP observability, decision visualization, compound system debugging, skill evaluation framework", "description": "Phase 2: Core Debugging - Now broken into 4 trackable subtasks.\n\n## Subtasks\n\n1. **neon-mcp1**: MCP observability integration - MCP tracing middleware, server health monitoring, MCP topology dashboard\n2. **neon-dec2**: Decision/reasoning visualization - Decision tree component, highlight planning/routing/tool selection spans, link decisions to outcomes  \n3. **neon-csd3**: Compound system debugging view - Multi-agent execution flow, cross-component correlation, agent-to-agent communication tracing\n4. **neon-ske4**: Skill evaluation framework - defineSkillEval API, parameter accuracy/result quality scorers, per-skill regression tracking\n\n## Original Scope (Weeks 5-12)\n\n- 2.1 MCP observability integration\n- 2.2 Decision/reasoning visualization  \n- 2.3 Compound system debugging view\n- 2.4 Skill evaluation framework\n\nThis epic is complete when all 4 subtasks are merged.", "status": "in_progress", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:25:48.354672791-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-03T10:05:00.000000000-05:00", "dependencies": [{"issue_id": "neon-3ae", "depends_on_id": "neon-4qf", "type": "blocks", "created_at": "2026-02-02T21:26:26.774772278-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-3ae", "depends_on_id": "neon-mcp1", "type": "blocks", "created_at": "2026-02-03T10:05:00.000000000-05:00", "created_by": "Claude"}, {"issue_id": "neon-3ae", "depends_on_id": "neon-dec2", "type": "blocks", "created_at": "2026-02-03T10:05:00.000000000-05:00", "created_by": "Claude"}, {"issue_id": "neon-3ae", "depends_on_id": "neon-csd3", "type": "blocks", "created_at": "2026-02-03T10:05:00.000000000-05:00", "created_by": "Claude"}, {"issue_id": "neon-3ae", "depends_on_id": "neon-ske4", "type": "blocks", "created_at": "2026-02-03T10:05:00.000000000-05:00", "created_by": "Claude"}]}
{"id": "neon-4", "title": "Phase 4: Python SDK & Ecosystem", "description": "Unlock the Python ecosystem with a full-featured Python SDK.\n\nGoals:\n- Python SDK core (tracing, scorers)\n- Python optimization integrations\n- PyPI package + documentation\n\nRequirements:\n- Feature parity with TypeScript SDK\n- Native Python idioms (decorators, context managers)\n- Integration with Python ML ecosystem\n\nDeliverables:\n- neon-sdk PyPI package\n- Tracing API matching TS SDK\n- All scorers ported\n- Optimization integrations (Agent Lightning, DSPy native)\n- Documentation and examples", "status": "open", "priority": 2, "issue_type": "epic", "created_at": "2026-02-01T13:09:15.661364558-05:00", "updated_at": "2026-02-01T13:09:15.661364558-05:00"}
{"id": "neon-4qf", "title": "Phase 1: Quick Wins - Enhanced span attributes, skill selection scorer, tool metrics dashboard, span detail enhancement", "description": "Weeks 1-4: 1.1 Enhanced span attributes for tool/skill (skill_category, selection_confidence, selection_reason, alternative_skills_considered, MCP fields). 1.2 Skill selection scorer - evaluate if correct tool/skill was selected. 1.3 Tool execution metrics dashboard - card showing most used tools, success/failure rates, latency per tool. 1.4 Span detail enhancement - show skill selection context, alternatives considered, confidence, reasoning.", "status": "closed", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:25:38.748583882-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-03T00:25:00.779152613-05:00", "closed_at": "2026-02-03T00:25:00.779152613-05:00", "close_reason": "Phase 1 complete: all 4 subtasks merged (PRs #69, #70, #72, #73)", "dependencies": [{"issue_id": "neon-4qf", "depends_on_id": "neon-wmn", "type": "blocks", "created_at": "2026-02-02T21:34:21.112977709-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-4qf", "depends_on_id": "neon-2jk", "type": "blocks", "created_at": "2026-02-02T21:52:48.200557118-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-4qf", "depends_on_id": "neon-4xw", "type": "blocks", "created_at": "2026-02-02T22:05:07.665910628-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-4qf", "depends_on_id": "neon-esk", "type": "blocks", "created_at": "2026-02-02T23:26:49.142256846-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-4xw", "title": "1.3 Tool execution metrics dashboard card", "description": "Add a dashboard card showing tool/skill execution statistics: most used tools, success/failure rates per tool, average latency per tool. Filter by time range and agent version. Files: frontend/components/dashboard/tool-metrics.tsx (new), frontend/server/trpc/routers/analytics.ts", "status": "closed", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T22:05:02.253008413-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-03T00:24:29.981061245-05:00", "closed_at": "2026-02-03T00:24:29.981061245-05:00", "close_reason": "PR #72 merged"}
{"id": "neon-5", "title": "Phase 5: Enterprise & Scale", "description": "Multi-tenant, monetization-ready enterprise features.\n\nGoals:\n- Workspace/org model with teams and permissions\n- SSO/SAML authentication\n- Usage-based billing hooks\n- Audit logs for compliance\n\nEnterprise Requirements:\n- Multi-Workspace: Organizations with teams and permissions\n- SSO/SAML: Enterprise authentication (Okta, Azure AD, etc.)\n- Audit Logs: Compliance-ready activity tracking (SOC2/GDPR)\n- Data Residency: Choose where data is stored (EU, US, etc.)\n- Scorer Marketplace: Community-shared evaluation functions\n\nTimeline: 12+ months out", "status": "open", "priority": 3, "issue_type": "epic", "created_at": "2026-02-01T13:09:23.893608941-05:00", "updated_at": "2026-02-01T13:09:23.893608941-05:00"}
{"id": "neon-6", "title": "Component attribution in traces", "description": "Completed component attribution feature:\n\n1. Added ComponentType enum to packages/shared/src/types/trace.ts with types: prompt, retrieval, tool, reasoning, planning, memory, routing, other\n\n2. Added componentType field to Span interface\n\n3. Updated ClickHouse schema (clickhouse-init.sql, 001_initial_schema.sql) with component_type column and index\n\n4. Created new migration 004_add_component_type.sql with:\n   - ALTER TABLE to add component_type column\n   - Two materialized views: component_score_stats_mv and component_performance_mv\n\n5. Added SDK tracing helpers (packages/sdk/src/tracing/index.ts):\n   - retrieval(), reasoning(), planning(), prompt(), routing() span helpers\n   - Updated generation() and tool() to support componentType option\n\nAll acceptance criteria met:\n- Spans can be tagged with component type ✓\n- Scores can be attributed to specific components ✓\n- ClickHouse schema updated for component queries ✓", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:09:34.135376267-05:00", "updated_at": "2026-02-01T15:56:40.534404449-05:00", "closed_at": "2026-02-01T15:56:40.534404449-05:00", "close_reason": "Implemented component attribution in traces. Added ComponentType enum, updated Span interface, ClickHouse schema, migration, and SDK tracing helpers.", "labels": ["observability", "phase-2"], "dependencies": [{"issue_id": "neon-6", "depends_on_id": "neon-2", "type": "parent-child", "created_at": "2026-02-01T13:21:41.402627842-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-7", "title": "Trace diffing UI", "description": "Build a side-by-side trace comparison UI for faster debugging. Show exactly what changed between two traces.\n\nFeatures:\n- Side-by-side span comparison\n- Highlight differences in inputs/outputs\n- Score differential display\n- Timeline overlay view\n\nFiles to Create:\n- frontend/app/traces/diff/\n\nAcceptance Criteria:\n- Can select two traces to compare\n- Visual diff of span trees\n- Highlight added/removed/changed spans\n- Show score changes per component", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:09:37.210115001-05:00", "updated_at": "2026-02-01T20:12:01.116253497-05:00", "closed_at": "2026-02-01T20:12:01.116253497-05:00", "close_reason": "PR #60 created", "labels": ["frontend", "observability", "phase-2"], "dependencies": [{"issue_id": "neon-7", "depends_on_id": "neon-2", "type": "parent-child", "created_at": "2026-02-01T13:21:42.466192939-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-8", "title": "Causal failure analysis scorer", "description": "Build a scorer that performs causal analysis to understand which upstream component caused downstream failure.\n\nExample: 'The retrieval returned irrelevant docs → agent hallucinated → tool call failed'\n\nImplementation:\n- Analyze span dependencies\n- Trace error propagation paths\n- Identify root cause component\n\nFiles to Create:\n- packages/sdk/src/scorers/causal.ts\n\nAcceptance Criteria:\n- Can identify causal chain in failed traces\n- Assigns blame to root cause component\n- Provides human-readable explanation", "status": "closed", "priority": 1, "issue_type": "feature", "created_at": "2026-02-01T13:09:45.439426785-05:00", "updated_at": "2026-02-01T21:12:32.648734141-05:00", "closed_at": "2026-02-01T21:12:32.648734141-05:00", "close_reason": "PR #61 created: https://github.com/Sean-Koval/neon/pull/61", "labels": ["observability", "phase-2", "sdk"], "dependencies": [{"issue_id": "neon-8", "depends_on_id": "neon-2", "type": "parent-child", "created_at": "2026-02-01T13:21:42.483751098-05:00", "created_by": "daemon", "metadata": "{}"}], "comments": [{"id": 1, "issue_id": "neon-8", "author": "Sean Koval", "text": "Implementation complete: Created causal failure analysis scorer with full test coverage (15 tests). Scorers: causalAnalysisScorer(), causalAnalysisDetailedScorer(), rootCauseScorer(). All 209 SDK tests pass.", "created_at": "2026-02-02T01:24:16Z"}]}
{"id": "neon-9", "title": "Multi-component correlation view", "description": "Build an analysis view that shows correlations between different components in compound AI systems.\n\nFeatures:\n- Cross-component performance analysis\n- Correlation heatmaps\n- Component health dashboard\n- Dependency graph visualization\n\nFiles to Create:\n- frontend/app/analysis/\n\nAcceptance Criteria:\n- Visualize component interactions\n- Show performance correlations\n- Identify bottleneck components", "status": "closed", "priority": 2, "issue_type": "feature", "created_at": "2026-02-01T13:09:51.46242888-05:00", "updated_at": "2026-02-01T22:05:28.518772599-05:00", "closed_at": "2026-02-01T22:05:28.518772599-05:00", "close_reason": "PR #62 created - https://github.com/Sean-Koval/neon/pull/62", "labels": ["frontend", "observability", "phase-2"], "dependencies": [{"issue_id": "neon-9", "depends_on_id": "neon-2", "type": "parent-child", "created_at": "2026-02-01T13:21:42.498806014-05:00", "created_by": "daemon", "metadata": "{}"}]}
{"id": "neon-bhk", "title": "3.2 Offline Tracing", "description": "Local disk buffering when API unavailable, configurable flush strategies, replay capability for offline traces. Files: packages/sdk/src/tracing/offline-buffer.ts (new)", "status": "open", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T00:56:59.85722083-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-03T00:56:59.85722083-05:00", "dependencies": [{"issue_id": "neon-bhk", "depends_on_id": "neon-3ae", "type": "blocks", "created_at": "2026-02-03T00:58:16.709990894-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-esk", "title": "1.4 Enhance span detail panel for skill context", "description": "## Overview\n\nEnhance the span detail panel to display skill selection context when viewing tool/skill spans. This makes the decision-making process visible to developers debugging agent behavior.\n\n## Background\n\nTask 1.1 (neon-wmn) added new span attributes for skill selection context:\n- `skillSelection.selectedSkill` - The skill that was chosen\n- `skillSelection.confidence` - Confidence score (0-1)\n- `skillSelection.reason` - Why this skill was selected\n- `skillSelection.alternativesConsidered` - Other skills that were evaluated\n- `skillSelection.category` - Skill category (tool, retrieval, reasoning, etc.)\n\nTask 1.4 surfaces this data in the UI so developers can answer: \"Why did the agent pick this skill?\"\n\n## Requirements\n\n### Display Skill Selection Context\nWhen a span has `skillSelection` data, show:\n1. **Selected Skill** - Name and category with icon\n2. **Confidence Score** - Visual indicator (progress bar or badge)\n3. **Selection Reason** - Text explanation of why this skill was chosen\n4. **Alternatives Considered** - Collapsible list showing other skills that were evaluated but not selected\n\n### Display MCP Context (if present)\nWhen a span has `mcpContext` data, show:\n1. **MCP Server** - Server ID and protocol version\n2. **Tool ID** - The MCP tool that was called\n3. **Transport** - stdio/sse/websocket\n\n### Display Decision Metadata (if present)\nWhen a span has `decisionMetadata`, show:\n1. **Decision Type** - skill_selection, routing, planning, etc.\n2. **Factors** - Key-value pairs of decision inputs\n3. **Outcome** - The decision result\n\n## Implementation\n\n### Files to Modify\n- `frontend/components/traces/span-detail.tsx` - Add new sections for skill/MCP/decision context\n\n### UI Design\n- Use collapsible sections to avoid overwhelming the panel\n- Match existing span-detail styling patterns\n- Use appropriate icons for skill categories\n- Color-code confidence levels (green >= 0.8, yellow >= 0.5, red < 0.5)\n\n### Type References\nTypes are defined in `packages/shared/src/types/trace.ts`:\n- `SkillSelectionContext`\n- `MCPContext`\n- `DecisionMetadata`\n- `SkillCategory`\n\n## Acceptance Criteria\n\n- [ ] Skill selection section appears for spans with skillSelection data\n- [ ] Confidence is visualized with color-coded indicator\n- [ ] Alternatives are shown in collapsible list\n- [ ] MCP context section appears for spans with mcpContext data\n- [ ] Decision metadata section appears when present\n- [ ] Sections are collapsible to manage panel height\n- [ ] Graceful handling when data is missing or partial\n- [ ] Matches existing span-detail styling\n\n## Dependencies\n\n- Depends on: neon-wmn (enhanced span attributes) - COMPLETED\n- Blocks: neon-4qf (Phase 1 Quick Wins completion)\n\n## Related\n\n- Part of Phase 1 Quick Wins in the Neon Platform Evaluation & Improvement Plan\n- PR #69 added the span attribute types", "status": "closed", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T23:19:32.891534764-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T23:34:30.864699863-05:00", "closed_at": "2026-02-02T23:34:30.864701977-05:00", "dependencies": [{"issue_id": "neon-esk", "depends_on_id": "neon-wmn", "type": "blocks", "created_at": "2026-02-02T23:26:48.860449684-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-l23", "title": "Phase 4: Advanced - Live debugging mode, automated root cause analysis, closed-loop optimization", "description": "Weeks 19+: 4.1 Live debugging mode - WebSocket-based trace streaming, breakpoint definition at span level, step-through execution (depends on Phase 2 visualization). 4.2 Automated root cause analysis - ML-based pattern detection in failures, cross-trace correlation for systemic issues, hypothesis generation with evidence (depends on sufficient trace data). 4.3 Closed-loop optimization - connect signal generation to training pipelines, auto-generate test cases from failures, feedback loop from preferences to prompts (depends on A/B testing framework).", "status": "open", "priority": 3, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:26:06.197191529-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T21:26:06.197191529-05:00", "dependencies": [{"issue_id": "neon-l23", "depends_on_id": "neon-pi8", "type": "blocks", "created_at": "2026-02-02T21:26:37.363117059-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-pi8", "title": "Phase 3: Experimentation - A/B testing framework, offline tracing", "description": "Weeks 13-18: 3.1 A/B testing framework - defineVariant API in SDK, statistical significance testing (t-test, bootstrap CI), comparison dashboard with confidence intervals. 3.2 Offline tracing - local disk buffering when API unavailable, configurable flush strategies, replay capability for offline traces.", "status": "open", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:25:57.128841452-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T21:25:57.128841452-05:00", "dependencies": [{"issue_id": "neon-pi8", "depends_on_id": "neon-3ae", "type": "blocks", "created_at": "2026-02-02T21:26:32.070523601-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-pi8", "depends_on_id": "neon-201", "type": "blocks", "created_at": "2026-02-03T00:58:22.000367032-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-pi8", "depends_on_id": "neon-bhk", "type": "blocks", "created_at": "2026-02-03T00:58:27.296158213-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-s9o", "title": "Neon Platform Evaluation & Improvement Plan", "description": "Staff AI/agent engineer evaluation identifying what's implemented, lacking, and missing for a production-grade agent ops platform. Focus areas: tracing, evals, experimentation, improvement loops, and debugging compound AI systems (tools, MCP, skills). Key files: packages/shared/src/types/trace.ts, temporal-workers/src/activities/emit-span.ts, packages/sdk/src/scorers/base.ts, frontend/components/traces/span-detail.tsx, frontend/components/traces/trace-timeline.tsx, packages/sdk/src/test.ts", "status": "open", "priority": 1, "issue_type": "epic", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:23:53.291909996-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T21:23:53.291909996-05:00", "dependencies": [{"issue_id": "neon-s9o", "depends_on_id": "neon-4qf", "type": "blocks", "created_at": "2026-02-02T21:26:46.092824629-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-s9o", "depends_on_id": "neon-3ae", "type": "blocks", "created_at": "2026-02-02T21:26:51.37867203-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-s9o", "depends_on_id": "neon-pi8", "type": "blocks", "created_at": "2026-02-02T21:26:56.672263814-05:00", "created_by": "Sean Koval"}, {"issue_id": "neon-s9o", "depends_on_id": "neon-l23", "type": "blocks", "created_at": "2026-02-02T21:27:01.976282812-05:00", "created_by": "Sean Koval"}]}
{"id": "neon-wmn", "title": "1.1 Enhanced span attributes for tool/skill execution", "description": "Extend span types with skill-specific attributes: skill_category, selection_confidence, selection_reason, alternative_skills_considered. Add MCP fields: mcp_server_id, mcp_tool_id, mcp_protocol_version. Add decision metadata: was_user_initiated, is_fallback, retry_count. Files: packages/shared/src/types/trace.ts, temporal-workers/src/activities/emit-span.ts", "status": "closed", "priority": 2, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-02T21:34:12.382896437-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-02T21:42:16.671419525-05:00", "closed_at": "2026-02-02T21:42:16.671421549-05:00", "comments": [{"id": 2, "issue_id": "neon-wmn", "author": "Sean Koval", "text": "Implemented enhanced span attributes: SkillSelectionContext, MCPContext, DecisionMetadata. Commit 6df117a", "created_at": "2026-02-03T02:42:16Z"}, {"id": 3, "issue_id": "neon-wmn", "author": "Sean Koval", "text": "PR created: https://github.com/Sean-Koval/neon/pull/69", "created_at": "2026-02-03T02:50:41Z"}]}
{"id": "neon-xr9", "title": "Fix CI pipeline failures", "description": "Pre-existing CI failures blocking quality gates:\n1. @neon/sdk typecheck - Cannot find module @neon/shared\n2. agent-eval-frontend lint - 102 errors\n3. WebSocket test - WebSocket is not a constructor\n4. Build failures from above\n\nMust fix to enable CI enforcement.", "status": "closed", "priority": 1, "issue_type": "task", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-01T18:18:05.389957595-05:00", "created_by": "Sean Koval", "updated_at": "2026-02-01T18:40:13.306372488-05:00", "closed_at": "2026-02-01T18:40:13.306372488-05:00", "close_reason": "Fixed all CI failures: lint auto-fixes, temporal-client types, WebSocket test mock", "labels": ["ci"]}
{"id": "neon-mcp1", "title": "2.1 MCP Observability Integration", "description": "## Overview\n\nBuild comprehensive observability for Model Context Protocol (MCP) server interactions. MCP is the emerging standard for AI agents to interact with external tools and data sources. This feature enables developers to monitor, debug, and optimize MCP tool usage in their agents.\n\n## Product Context\n\nNeon is an agent evaluation platform. As agents increasingly use MCP servers (file systems, databases, APIs), developers need visibility into:\n- Which MCP servers are being called and how often\n- Server health and latency characteristics\n- Error patterns and failure modes\n- The topology of MCP connections in multi-agent systems\n\n## Technical Requirements\n\n### 1. MCP Tracing Middleware (SDK)\n\nCreate middleware that automatically instruments MCP client calls.\n\n**Files to Create:**\n- `packages/sdk/src/tracing/mcp-middleware.ts` - Core middleware\n- `packages/sdk/src/tracing/mcp-types.ts` - MCP-specific trace types\n- `packages/neon-sdk-python/neon_sdk/tracing/mcp.py` - Python equivalent\n\n**Implementation:**\n```typescript\n// Wrap MCP client to auto-trace all tool calls\nexport function withMCPTracing<T extends MCPClient>(client: T, config?: MCPTracingConfig): T {\n  // Intercept tool calls, emit spans with MCPContext\n  // Track: serverId, toolId, transport, latency, errors\n  // Propagate trace context across MCP boundaries\n}\n\n// Decorator for Python\n@mcp_traced(server_id=\"filesystem\")\nasync def read_file(path: str) -> str: ...\n```\n\n**MCPContext enrichment:**\n- Auto-detect transport type (stdio/http/websocket)\n- Capture protocol version from handshake\n- Record server capabilities\n- Track connection lifecycle (connect/disconnect events)\n\n### 2. MCP Server Health Monitoring\n\nTrack aggregate health metrics per MCP server.\n\n**Files to Modify:**\n- `frontend/server/trpc/routers/analytics.ts` - Add MCP analytics queries\n- `frontend/lib/clickhouse.ts` - Add MCP aggregation queries\n\n**Metrics to Track:**\n- Call count per server/tool (1min, 5min, 1hr windows)\n- P50/P95/P99 latency per server\n- Error rate and error type distribution\n- Connection pool utilization (if applicable)\n\n**ClickHouse Query Pattern:**\n```sql\nSELECT \n  mcp_server_id,\n  mcp_tool_id,\n  count() as call_count,\n  quantile(0.95)(duration_ms) as p95_latency,\n  countIf(status = 'error') / count() as error_rate\nFROM spans\nWHERE mcp_server_id IS NOT NULL\n  AND timestamp >= now() - INTERVAL 1 HOUR\nGROUP BY mcp_server_id, mcp_tool_id\n```\n\n### 3. MCP Topology Dashboard\n\nVisualize the MCP server topology and health.\n\n**Files to Create:**\n- `frontend/app/mcp/page.tsx` - MCP dashboard page\n- `frontend/components/mcp/server-topology.tsx` - Network graph visualization\n- `frontend/components/mcp/server-card.tsx` - Individual server health card\n- `frontend/components/mcp/tool-usage-table.tsx` - Tool usage breakdown\n- `frontend/hooks/use-mcp-health.ts` - Data fetching hook\n\n**Dashboard Features:**\n1. **Topology View**: D3/React Flow graph showing agents → MCP servers → tools\n2. **Server Cards**: Health status, latency sparkline, error rate indicator\n3. **Tool Breakdown**: Table of tools per server with usage stats\n4. **Alerts**: Highlight servers with degraded performance\n\n**UI States:**\n- Loading skeleton while fetching\n- Empty state when no MCP data\n- Error state with retry option\n- Real-time updates via polling (30s interval)\n\n## Acceptance Criteria\n\n- [ ] SDK middleware auto-traces MCP calls without code changes to agent\n- [ ] MCPContext is populated for all MCP spans (serverId, toolId, transport)\n- [ ] Python SDK has equivalent tracing decorator\n- [ ] Dashboard shows all MCP servers with health indicators\n- [ ] Topology visualization renders server relationships\n- [ ] Latency percentiles are accurate (verified against raw data)\n- [ ] Error rates update in real-time\n- [ ] No mock data - all queries hit real ClickHouse\n- [ ] Performance: Dashboard loads in <500ms for 10k spans\n- [ ] Tests: Unit tests for middleware, integration tests for queries\n\n## Dependencies\n\n- Requires: MCPContext types (already in packages/shared/src/types/trace.ts)\n- Blocks: neon-3ae completion, neon-201, neon-bhk\n\n## Reference Files\n\n- `packages/shared/src/types/trace.ts` - MCPContext interface (lines 87-102)\n- `frontend/components/traces/span-detail.tsx` - MCPContextSection component (lines 643-712)\n- `frontend/app/analysis/page.tsx` - Example dashboard pattern\n- `frontend/hooks/use-component-correlation.ts` - Example data fetching hook", "status": "open", "priority": 1, "issue_type": "feature", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude", "updated_at": "2026-02-03T10:00:00.000000000-05:00", "labels": ["phase-2", "mcp", "observability", "sdk", "frontend"], "dependencies": [{"issue_id": "neon-mcp1", "depends_on_id": "neon-3ae", "type": "parent-child", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude"}]}
{"id": "neon-dec2", "title": "2.2 Decision/Reasoning Visualization", "description": "## Overview\n\nBuild visualization components that show agent decision-making processes. Agents make critical choices at branch points (which tool to call, which path to take, when to stop). This feature makes those decisions visible and debuggable.\n\n## Product Context\n\nWhen an agent fails or behaves unexpectedly, developers need to understand:\n- What decisions led to this outcome?\n- What alternatives were considered?\n- Why was this path chosen over others?\n- How did earlier decisions affect later ones?\n\nThis is especially critical for planning agents, routers, and multi-step reasoning systems.\n\n## Technical Requirements\n\n### 1. Decision Tree Component\n\nVisualize the decision points in a trace as an interactive tree.\n\n**Files to Create:**\n- `frontend/components/traces/decision-tree.tsx` - Main tree visualization\n- `frontend/components/traces/decision-node.tsx` - Individual decision node\n- `frontend/components/traces/decision-edge.tsx` - Edge with outcome info\n- `frontend/lib/trace-to-decision-tree.ts` - Transform trace → tree structure\n\n**Decision Tree Data Model:**\n```typescript\ninterface DecisionNode {\n  id: string;\n  spanId: string;\n  type: 'routing' | 'planning' | 'tool_selection' | 'branching' | 'termination';\n  question: string;  // \"Which tool to use?\" or extracted from span\n  chosenOption: string;\n  alternatives: Array<{\n    option: string;\n    confidence?: number;\n    reason?: string;\n    wasChosen: boolean;\n  }>;\n  outcome: 'success' | 'failure' | 'pending';\n  children: DecisionNode[];\n}\n```\n\n**Transformation Logic:**\n- Identify decision spans: componentType in ['routing', 'planning', 'tool']\n- Extract alternatives from skillSelection.alternativesConsidered\n- Build parent-child relationships from span tree\n- Annotate outcomes based on descendant statuses\n\n### 2. Planning/Routing Span Highlighting\n\nEnhance the trace timeline to highlight decision-critical spans.\n\n**Files to Modify:**\n- `frontend/components/traces/trace-timeline.tsx` - Add decision highlighting\n- `frontend/components/traces/span-type-badge.tsx` - Add decision badge variant\n\n**Visual Indicators:**\n- Planning spans: Purple left border + brain icon\n- Routing spans: Orange left border + git-branch icon\n- Tool selection spans: Blue left border + crosshairs icon\n- Show confidence score as mini progress bar on span row\n- Highlight low-confidence decisions (< 0.5) with warning indicator\n\n### 3. Decision-to-Outcome Linking\n\nShow how decisions propagate to final outcomes.\n\n**Files to Create:**\n- `frontend/components/traces/outcome-attribution.tsx` - Outcome → decision mapping\n- `frontend/lib/decision-outcome-analysis.ts` - Analysis utilities\n\n**Features:**\n- Click on a failed span → highlight the decision that led to it\n- \"Root cause\" indicator on decisions that led to failures\n- Counterfactual hints: \"Alternative X had higher confidence\"\n\n**Algorithm:**\n```typescript\nfunction findCausalDecisions(failedSpan: Span, allSpans: Span[]): DecisionSpan[] {\n  // Walk up the span tree\n  // Find ancestor spans with componentType in decision types\n  // Return ordered list from root decision → immediate parent\n}\n```\n\n### 4. Reasoning Step Viewer\n\nFor chain-of-thought and planning agents, show the reasoning steps.\n\n**Files to Create:**\n- `frontend/components/traces/reasoning-steps.tsx` - Step-by-step viewer\n\n**Features:**\n- Extract reasoning from span output (detect CoT patterns)\n- Number steps sequentially\n- Highlight key conclusions\n- Link reasoning steps to subsequent actions\n\n## Acceptance Criteria\n\n- [ ] Decision tree renders for traces with routing/planning/tool spans\n- [ ] Tree is interactive: click node to jump to span detail\n- [ ] Alternatives are visible with confidence scores\n- [ ] Timeline highlights decision spans with appropriate colors/icons\n- [ ] Low-confidence decisions show warning indicator\n- [ ] Clicking failed span highlights causal decisions\n- [ ] Reasoning steps extract and display CoT content\n- [ ] No mock data - works with real trace data\n- [ ] Performance: Tree renders in <100ms for 100-span traces\n- [ ] Responsive: Works on tablet-sized screens\n- [ ] Tests: Unit tests for transformation logic, visual regression tests\n\n## Dependencies\n\n- Requires: SkillSelectionContext, DecisionMetadata types (already exist)\n- Requires: componentType field on spans (already exists)\n- Blocks: neon-3ae completion\n\n## Reference Files\n\n- `packages/shared/src/types/trace.ts` - SkillSelectionContext (lines 69-82), DecisionMetadata (lines 107-120)\n- `frontend/components/traces/span-detail.tsx` - SkillSelectionSection pattern (lines 511-602)\n- `frontend/components/traces/trace-timeline.tsx` - Timeline component to enhance\n- `frontend/components/analysis/` - D3 visualization patterns", "status": "open", "priority": 1, "issue_type": "feature", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude", "updated_at": "2026-02-03T10:00:00.000000000-05:00", "labels": ["phase-2", "visualization", "frontend", "debugging"], "dependencies": [{"issue_id": "neon-dec2", "depends_on_id": "neon-3ae", "type": "parent-child", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude"}]}
{"id": "neon-csd3", "title": "2.3 Compound System Debugging View", "description": "## Overview\n\nBuild a specialized debugging view for compound AI systems - architectures with multiple agents, orchestrators, and sub-agents working together. These systems are increasingly common (AutoGPT, CrewAI, multi-agent workflows) but extremely hard to debug with traditional tools.\n\n## Product Context\n\nCompound AI systems have unique debugging challenges:\n- Multiple agents with their own traces that need correlation\n- Orchestrators that spawn and coordinate sub-agents\n- Cross-agent communication (messages, state sharing)\n- Cascading failures that propagate across agent boundaries\n- Emergent behaviors from agent interactions\n\nNeon must be the go-to tool for debugging these systems.\n\n## Technical Requirements\n\n### 1. Multi-Agent Execution Flow Visualization\n\nShow the high-level flow of execution across multiple agents.\n\n**Files to Create:**\n- `frontend/app/traces/[id]/multi-agent/page.tsx` - Multi-agent view page\n- `frontend/components/multi-agent/execution-flow.tsx` - Main flow visualization\n- `frontend/components/multi-agent/agent-lane.tsx` - Swimlane per agent\n- `frontend/components/multi-agent/handoff-indicator.tsx` - Agent-to-agent handoff\n- `frontend/lib/multi-agent-analysis.ts` - Analysis utilities\n\n**Visualization Design:**\n```\n┌─────────────────────────────────────────────────────────────┐\n│  Orchestrator    ████░░░░░░░░░░░░░░████░░░░░░░░░░████████  │\n│                       ↓              ↓              ↑       │\n│  Research Agent  ░░░░████████████░░░░░░░░░░░░░░░░░░░░░░░░  │\n│                            ↓                                │\n│  Writer Agent    ░░░░░░░░░░░░░░████████████░░░░░░░░░░░░░░  │\n│                                        ↓                    │\n│  Editor Agent    ░░░░░░░░░░░░░░░░░░░░░░░░████████░░░░░░░░  │\n└─────────────────────────────────────────────────────────────┘\n         0s       5s       10s      15s      20s      25s\n```\n\n**Data Model:**\n```typescript\ninterface AgentExecution {\n  agentId: string;\n  agentName: string;\n  spans: Span[];\n  startTime: Date;\n  endTime: Date;\n  status: 'running' | 'success' | 'error';\n}\n\ninterface AgentHandoff {\n  fromAgentId: string;\n  toAgentId: string;\n  timestamp: Date;\n  payload?: string;  // What was passed\n  spanId: string;    // The span where handoff occurred\n}\n```\n\n**Detection Logic:**\n- Group spans by agentId field\n- Detect handoffs: span in agent A references agent B, or explicit handoff spans\n- Build execution timeline per agent\n- Identify parallel vs sequential execution\n\n### 2. Cross-Component Correlation\n\nShow how components across agents affect each other.\n\n**Files to Create:**\n- `frontend/components/multi-agent/correlation-matrix.tsx` - Agent × Component matrix\n- `frontend/components/multi-agent/failure-cascade.tsx` - Failure propagation view\n\n**Correlation Analysis:**\n- Compute score correlation between agents\n- Identify which agent's failures correlate with others\n- Show component-level breakdown per agent\n\n**Query Pattern:**\n```sql\nSELECT \n  a.agent_id as agent_a,\n  b.agent_id as agent_b,\n  corr(a.score, b.score) as correlation\nFROM scores a\nJOIN scores b ON a.trace_id = b.trace_id AND a.agent_id != b.agent_id\nGROUP BY a.agent_id, b.agent_id\nHAVING count() >= 10\n```\n\n### 3. Agent-to-Agent Communication Tracing\n\nCapture and display inter-agent messages.\n\n**Files to Create:**\n- `frontend/components/multi-agent/message-log.tsx` - Chronological message view\n- `frontend/components/multi-agent/message-detail.tsx` - Individual message content\n- `packages/sdk/src/tracing/agent-communication.ts` - SDK helpers\n\n**SDK Helper:**\n```typescript\n// In agent code:\nawait traceAgentMessage({\n  fromAgent: 'orchestrator',\n  toAgent: 'researcher',\n  messageType: 'task_assignment',\n  content: { task: 'Find latest AI news' }\n});\n```\n\n**Message Display:**\n- Timeline of messages between agents\n- Filter by agent pair\n- Search message content\n- Link messages to spans that sent/received them\n\n### 4. Cascading Failure Detection\n\nAutomatically detect when a failure in one agent caused failures in others.\n\n**Files to Modify:**\n- `packages/sdk/src/scorers/causal.ts` - Extend for multi-agent causality\n\n**Files to Create:**\n- `frontend/components/multi-agent/failure-chain.tsx` - Failure chain visualization\n\n**Algorithm:**\n```typescript\nfunction detectCascadingFailure(traces: TraceWithSpans[]): CascadeChain[] {\n  // 1. Find all failed spans\n  // 2. For each failure, check if downstream agents also failed\n  // 3. Build causal chains: Agent A failure → handoff → Agent B failure\n  // 4. Rank chains by impact (number of downstream failures)\n}\n```\n\n## Acceptance Criteria\n\n- [ ] Execution flow shows all agents in swimlane view\n- [ ] Handoffs are visible as connecting arrows between lanes\n- [ ] Clicking agent lane filters to that agent's spans\n- [ ] Correlation matrix shows agent-to-agent score correlation\n- [ ] Message log displays inter-agent communication chronologically\n- [ ] Cascading failures are automatically detected and highlighted\n- [ ] Failure chain shows root cause agent → affected agents\n- [ ] Works with real multi-agent traces (test with CrewAI/AutoGPT examples)\n- [ ] Performance: Renders 5+ agents with 500+ spans in <1s\n- [ ] Tests: Unit tests for analysis functions, E2E tests for visualization\n\n## Dependencies\n\n- Requires: agentId field on traces/spans (already exists)\n- Requires: Causal analysis scorer (already exists in packages/sdk/src/scorers/causal.ts)\n- Blocks: neon-3ae completion\n\n## Reference Files\n\n- `packages/shared/src/types/trace.ts` - Trace.agentId field (line 140)\n- `packages/sdk/src/scorers/causal.ts` - Causal analysis patterns\n- `frontend/app/analysis/page.tsx` - Correlation/dependency patterns\n- `frontend/components/analysis/` - Visualization components", "status": "open", "priority": 1, "issue_type": "feature", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude", "updated_at": "2026-02-03T10:00:00.000000000-05:00", "labels": ["phase-2", "multi-agent", "debugging", "frontend"], "dependencies": [{"issue_id": "neon-csd3", "depends_on_id": "neon-3ae", "type": "parent-child", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude"}]}
{"id": "neon-ske4", "title": "2.4 Skill Evaluation Framework", "description": "## Overview\n\nBuild a comprehensive framework for evaluating individual skills/tools within agents. While existing scorers evaluate overall agent performance, this framework enables fine-grained evaluation of specific capabilities - critical for identifying which skills need improvement.\n\n## Product Context\n\nAgents use many skills (search, code editing, file operations, API calls). When an agent underperforms, developers need to know:\n- Which specific skills are failing?\n- Are skill parameters being set correctly?\n- Is the skill producing quality results?\n- How has skill performance changed over time?\n\nThis framework enables per-skill regression tracking and targeted improvement.\n\n## Technical Requirements\n\n### 1. defineSkillEval API\n\nCreate a new SDK API for defining skill-specific evaluations.\n\n**Files to Create:**\n- `packages/sdk/src/evals/skill-eval.ts` - Core API\n- `packages/sdk/src/evals/skill-eval-types.ts` - Type definitions\n- `packages/neon-sdk-python/neon_sdk/evals/skill_eval.py` - Python equivalent\n\n**API Design:**\n```typescript\nimport { defineSkillEval, parameterAccuracy, resultQuality } from '@neon/sdk';\n\nconst searchSkillEval = defineSkillEval({\n  name: 'web_search_eval',\n  skillName: 'web_search',  // Matches span.toolName or skillSelection.selectedSkill\n  \n  // Parameter validation\n  parameters: {\n    query: {\n      required: true,\n      validate: (value) => value.length > 0 && value.length < 500,\n      score: parameterAccuracy({\n        // Compare to expected query if provided\n        similarity: 'semantic',  // or 'exact', 'contains'\n        threshold: 0.8\n      })\n    },\n    num_results: {\n      required: false,\n      validate: (value) => value >= 1 && value <= 20,\n    }\n  },\n  \n  // Result quality evaluation\n  resultScorers: [\n    resultQuality({\n      name: 'relevance',\n      prompt: 'Rate how relevant the search results are to the query (0-1)',\n      model: 'claude-3-haiku'\n    }),\n    resultQuality({\n      name: 'freshness', \n      evaluate: (result, context) => {\n        // Custom scorer: check if results are recent\n        const dates = extractDates(result);\n        return dates.some(d => isWithinDays(d, 30)) ? 1 : 0;\n      }\n    })\n  ],\n  \n  // Expected behavior assertions\n  assertions: [\n    { condition: 'result_count > 0', message: 'Search should return results' },\n    { condition: 'latency_ms < 5000', message: 'Search should complete within 5s' }\n  ]\n});\n\n// Usage in test suite\nconst suite = defineSuite({\n  name: 'agent-skills',\n  skillEvals: [searchSkillEval, codeEditSkillEval],\n  tests: [...]\n});\n```\n\n**Python Equivalent:**\n```python\nfrom neon_sdk import define_skill_eval, parameter_accuracy, result_quality\n\nsearch_eval = define_skill_eval(\n    name=\"web_search_eval\",\n    skill_name=\"web_search\",\n    parameters={\n        \"query\": ParameterSpec(\n            required=True,\n            validate=lambda v: 0 < len(v) < 500,\n            score=parameter_accuracy(similarity=\"semantic\")\n        )\n    },\n    result_scorers=[\n        result_quality(name=\"relevance\", prompt=\"...\")\n    ]\n)\n```\n\n### 2. Parameter Accuracy Scorers\n\nScorers that evaluate whether skill parameters are correct.\n\n**Files to Create:**\n- `packages/sdk/src/scorers/parameter-accuracy.ts` - Parameter scorers\n\n**Scorer Types:**\n```typescript\n// Exact match\nparameterAccuracy({ similarity: 'exact' })\n\n// Semantic similarity (uses embeddings)\nparameterAccuracy({ similarity: 'semantic', threshold: 0.8 })\n\n// Contains expected keywords\nparameterAccuracy({ similarity: 'contains', keywords: ['error', 'fix'] })\n\n// Type validation\nparameterAccuracy({ type: 'object', schema: jsonSchema })\n\n// Range validation  \nparameterAccuracy({ type: 'number', min: 1, max: 100 })\n```\n\n### 3. Result Quality Scorers\n\nScorers that evaluate the quality of skill outputs.\n\n**Files to Create:**\n- `packages/sdk/src/scorers/result-quality.ts` - Result scorers\n\n**Scorer Types:**\n```typescript\n// LLM-judged quality\nresultQuality({\n  name: 'code_correctness',\n  prompt: 'Does this code change correctly implement the requested feature?',\n  model: 'claude-3-5-sonnet'\n})\n\n// Structured output validation\nresultQuality({\n  name: 'json_valid',\n  evaluate: (result) => {\n    try { JSON.parse(result); return 1; } catch { return 0; }\n  }\n})\n\n// Custom business logic\nresultQuality({\n  name: 'contains_answer',\n  evaluate: (result, context) => {\n    return result.includes(context.expected.answer) ? 1 : 0;\n  }\n})\n```\n\n### 4. Per-Skill Regression Tracking Dashboard\n\nVisualize skill performance over time.\n\n**Files to Create:**\n- `frontend/app/skills/page.tsx` - Skills dashboard\n- `frontend/components/skills/skill-performance-chart.tsx` - Time series chart\n- `frontend/components/skills/skill-comparison-table.tsx` - Skill × version table\n- `frontend/components/skills/regression-alerts.tsx` - Regression indicators\n- `frontend/hooks/use-skill-analytics.ts` - Data fetching\n\n**Dashboard Features:**\n1. **Skill List**: All skills used by agents with aggregate scores\n2. **Performance Chart**: Score over time per skill (line chart)\n3. **Version Comparison**: Compare skill scores across agent versions\n4. **Regression Alerts**: Highlight skills with declining performance\n5. **Drill-down**: Click skill → see individual evaluations\n\n**ClickHouse Queries:**\n```sql\n-- Per-skill scores over time\nSELECT \n  toStartOfHour(timestamp) as hour,\n  tool_name as skill,\n  avg(score_value) as avg_score,\n  count() as eval_count\nFROM scores s\nJOIN spans sp ON s.span_id = sp.span_id\nWHERE s.name LIKE '%skill%' OR s.name LIKE '%parameter%' OR s.name LIKE '%result%'\nGROUP BY hour, skill\nORDER BY hour\n\n-- Regression detection\nSELECT \n  tool_name,\n  avg(if(timestamp > now() - INTERVAL 7 DAY, score_value, NULL)) as recent_avg,\n  avg(if(timestamp <= now() - INTERVAL 7 DAY AND timestamp > now() - INTERVAL 14 DAY, score_value, NULL)) as previous_avg,\n  recent_avg - previous_avg as delta\nFROM scores s\nJOIN spans sp ON s.span_id = sp.span_id  \nGROUP BY tool_name\nHAVING abs(delta) > 0.1  -- Significant change\n```\n\n## Acceptance Criteria\n\n- [ ] defineSkillEval API works in TypeScript SDK\n- [ ] defineSkillEval API works in Python SDK\n- [ ] Parameter accuracy scorers evaluate parameters correctly\n- [ ] Result quality scorers evaluate outputs correctly\n- [ ] Skill evals integrate with existing test runner\n- [ ] Dashboard shows all skills with aggregate scores\n- [ ] Time series chart displays score trends\n- [ ] Regression detection highlights declining skills\n- [ ] Can drill down from skill to individual evaluations\n- [ ] No mock data - real ClickHouse queries\n- [ ] Performance: Dashboard loads in <1s for 50 skills\n- [ ] Tests: Unit tests for all scorer types, integration tests for API\n\n## Dependencies\n\n- Requires: Existing scorer infrastructure (packages/sdk/src/scorers/base.ts)\n- Requires: Skill selection types (already exist)\n- Blocks: neon-3ae completion\n\n## Reference Files\n\n- `packages/sdk/src/scorers/base.ts` - Scorer base class and defineScorer\n- `packages/sdk/src/scorers/skill-selection.ts` - Existing skill scorers (reference)\n- `packages/sdk/src/test.ts` - Test runner integration point\n- `frontend/app/analysis/page.tsx` - Dashboard patterns\n- `frontend/hooks/use-component-correlation.ts` - Analytics hook patterns", "status": "open", "priority": 1, "issue_type": "feature", "owner": "seanmkoval@gmail.com", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude", "updated_at": "2026-02-03T10:00:00.000000000-05:00", "labels": ["phase-2", "sdk", "evals", "frontend", "regression"], "dependencies": [{"issue_id": "neon-ske4", "depends_on_id": "neon-3ae", "type": "parent-child", "created_at": "2026-02-03T10:00:00.000000000-05:00", "created_by": "Claude"}]}
